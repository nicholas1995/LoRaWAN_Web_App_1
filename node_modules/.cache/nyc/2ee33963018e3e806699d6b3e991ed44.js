var cov_1drmyaw665=function(){var path="/Users/nicholasmitchell/LoRaWAN_Web_App_1/server/src/controllers/devices.js",hash="af6f48fb80c4629720b8d3c552f5c5b417683cbf",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/nicholasmitchell/LoRaWAN_Web_App_1/server/src/controllers/devices.js",statementMap:{"0":{start:{line:1,column:24},end:{line:1,column:66}},"1":{start:{line:2,column:11},end:{line:2,column:53}},"2":{start:{line:3,column:25},end:{line:3,column:73}},"3":{start:{line:4,column:18},end:{line:4,column:60}},"4":{start:{line:5,column:23},end:{line:5,column:69}},"5":{start:{line:6,column:25},end:{line:6,column:69}},"6":{start:{line:7,column:16},end:{line:7,column:46}},"7":{start:{line:8,column:14},end:{line:8,column:43}},"8":{start:{line:9,column:15},end:{line:9,column:32}},"9":{start:{line:10,column:22},end:{line:10,column:45}},"10":{start:{line:15,column:4},end:{line:72,column:5}},"11":{start:{line:16,column:8},end:{line:20,column:9}},"12":{start:{line:22,column:9},end:{line:72,column:5}},"13":{start:{line:23,column:8},end:{line:46,column:8}},"14":{start:{line:24,column:12},end:{line:33,column:13}},"15":{start:{line:35,column:12},end:{line:45,column:13}},"16":{start:{line:47,column:11},end:{line:72,column:5}},"17":{start:{line:48,column:8},end:{line:58,column:9}},"18":{start:{line:59,column:11},end:{line:72,column:5}},"19":{start:{line:60,column:8},end:{line:71,column:9}},"20":{start:{line:73,column:4},end:{line:73,column:19}},"21":{start:{line:77,column:23},end:{line:77,column:25}},"22":{start:{line:78,column:15},end:{line:92,column:3}},"23":{start:{line:93,column:4},end:{line:122,column:3}},"24":{start:{line:94,column:8},end:{line:94,column:57}},"25":{start:{line:95,column:8},end:{line:95,column:59}},"26":{start:{line:96,column:8},end:{line:96,column:46}},"27":{start:{line:97,column:8},end:{line:97,column:67}},"28":{start:{line:98,column:8},end:{line:98,column:66}},"29":{start:{line:99,column:8},end:{line:99,column:70}},"30":{start:{line:100,column:8},end:{line:100,column:81}},"31":{start:{line:101,column:8},end:{line:101,column:104}},"32":{start:{line:102,column:8},end:{line:102,column:96}},"33":{start:{line:103,column:8},end:{line:103,column:68}},"34":{start:{line:104,column:8},end:{line:104,column:52}},"35":{start:{line:105,column:8},end:{line:105,column:45}},"36":{start:{line:106,column:8},end:{line:106,column:35}},"37":{start:{line:107,column:8},end:{line:121,column:10}},"38":{start:{line:123,column:4},end:{line:123,column:26}},"39":{start:{line:127,column:17},end:{line:143,column:5}},"40":{start:{line:144,column:4},end:{line:144,column:18}},"41":{start:{line:148,column:26},end:{line:158,column:3}},"42":{start:{line:159,column:4},end:{line:159,column:29}},"43":{start:{line:163,column:4},end:{line:174,column:5}},"44":{start:{line:164,column:29},end:{line:164,column:61}},"45":{start:{line:165,column:27},end:{line:169,column:14}},"46":{start:{line:168,column:16},end:{line:168,column:56}},"47":{start:{line:170,column:8},end:{line:170,column:71}},"48":{start:{line:171,column:8},end:{line:171,column:28}},"49":{start:{line:173,column:8},end:{line:173,column:18}},"50":{start:{line:177,column:4},end:{line:187,column:5}},"51":{start:{line:178,column:32},end:{line:182,column:14}},"52":{start:{line:181,column:16},end:{line:181,column:56}},"53":{start:{line:183,column:8},end:{line:183,column:84}},"54":{start:{line:184,column:8},end:{line:184,column:33}},"55":{start:{line:186,column:8},end:{line:186,column:18}},"56":{start:{line:191,column:4},end:{line:214,column:5}},"57":{start:{line:192,column:8},end:{line:210,column:9}},"58":{start:{line:193,column:12},end:{line:197,column:13}},"59":{start:{line:194,column:16},end:{line:196,column:17}},"60":{start:{line:195,column:20},end:{line:195,column:75}},"61":{start:{line:198,column:12},end:{line:209,column:13}},"62":{start:{line:199,column:16},end:{line:199,column:54}},"63":{start:{line:201,column:16},end:{line:208,column:17}},"64":{start:{line:202,column:20},end:{line:207,column:19}},"65":{start:{line:203,column:24},end:{line:203,column:82}},"66":{start:{line:204,column:20},end:{line:204,column:26}},"67":{start:{line:206,column:24},end:{line:206,column:62}},"68":{start:{line:211,column:8},end:{line:211,column:28}},"69":{start:{line:213,column:8},end:{line:213,column:18}},"70":{start:{line:217,column:4},end:{line:231,column:5}},"71":{start:{line:218,column:29},end:{line:222,column:14}},"72":{start:{line:221,column:16},end:{line:221,column:98}},"73":{start:{line:223,column:8},end:{line:227,column:15}},"74":{start:{line:226,column:16},end:{line:226,column:97}},"75":{start:{line:228,column:8},end:{line:228,column:74}},"76":{start:{line:230,column:8},end:{line:230,column:18}},"77":{start:{line:234,column:0},end:{line:589,column:1}},"78":{start:{line:236,column:29},end:{line:236,column:33}},"79":{start:{line:238,column:8},end:{line:302,column:9}},"80":{start:{line:239,column:12},end:{line:244,column:19}},"81":{start:{line:242,column:20},end:{line:242,column:39}},"82":{start:{line:243,column:20},end:{line:243,column:92}},"83":{start:{line:246,column:29},end:{line:251,column:18}},"84":{start:{line:249,column:20},end:{line:249,column:39}},"85":{start:{line:250,column:20},end:{line:250,column:85}},"86":{start:{line:253,column:32},end:{line:258,column:18}},"87":{start:{line:256,column:20},end:{line:256,column:39}},"88":{start:{line:257,column:20},end:{line:257,column:85}},"89":{start:{line:259,column:12},end:{line:277,column:13}},"90":{start:{line:260,column:16},end:{line:265,column:23}},"91":{start:{line:263,column:24},end:{line:263,column:43}},"92":{start:{line:264,column:24},end:{line:264,column:89}},"93":{start:{line:266,column:16},end:{line:276,column:17}},"94":{start:{line:267,column:20},end:{line:275,column:21}},"95":{start:{line:268,column:24},end:{line:274,column:25}},"96":{start:{line:269,column:28},end:{line:273,column:35}},"97":{start:{line:272,column:36},end:{line:272,column:134}},"98":{start:{line:279,column:12},end:{line:284,column:18}},"99":{start:{line:282,column:20},end:{line:282,column:39}},"100":{start:{line:283,column:20},end:{line:283,column:124}},"101":{start:{line:286,column:12},end:{line:286,column:113}},"102":{start:{line:288,column:12},end:{line:288,column:110}},"103":{start:{line:290,column:12},end:{line:290,column:29}},"104":{start:{line:291,column:12},end:{line:291,column:76}},"105":{start:{line:292,column:12},end:{line:292,column:49}},"106":{start:{line:293,column:12},end:{line:301,column:13}},"107":{start:{line:294,column:16},end:{line:294,column:90}},"108":{start:{line:295,column:19},end:{line:301,column:13}},"109":{start:{line:296,column:16},end:{line:296,column:129}},"110":{start:{line:297,column:19},end:{line:301,column:13}},"111":{start:{line:298,column:16},end:{line:298,column:132}},"112":{start:{line:300,column:16},end:{line:300,column:73}},"113":{start:{line:305,column:8},end:{line:319,column:9}},"114":{start:{line:306,column:25},end:{line:311,column:13}},"115":{start:{line:309,column:16},end:{line:309,column:56}},"116":{start:{line:312,column:12},end:{line:312,column:61}},"117":{start:{line:313,column:12},end:{line:313,column:45}},"118":{start:{line:315,column:12},end:{line:315,column:29}},"119":{start:{line:316,column:12},end:{line:316,column:75}},"120":{start:{line:317,column:12},end:{line:317,column:49}},"121":{start:{line:318,column:12},end:{line:318,column:85}},"122":{start:{line:322,column:8},end:{line:334,column:9}},"123":{start:{line:323,column:26},end:{line:323,column:44}},"124":{start:{line:324,column:26},end:{line:329,column:18}},"125":{start:{line:327,column:20},end:{line:327,column:39}},"126":{start:{line:328,column:20},end:{line:328,column:123}},"127":{start:{line:330,column:12},end:{line:330,column:100}},"128":{start:{line:332,column:12},end:{line:332,column:29}},"129":{start:{line:333,column:12},end:{line:333,column:85}},"130":{start:{line:337,column:8},end:{line:349,column:9}},"131":{start:{line:338,column:35},end:{line:338,column:74}},"132":{start:{line:339,column:27},end:{line:344,column:18}},"133":{start:{line:342,column:20},end:{line:342,column:39}},"134":{start:{line:343,column:20},end:{line:343,column:124}},"135":{start:{line:345,column:12},end:{line:345,column:100}},"136":{start:{line:347,column:12},end:{line:347,column:29}},"137":{start:{line:348,column:12},end:{line:348,column:85}},"138":{start:{line:352,column:29},end:{line:352,column:33}},"139":{start:{line:354,column:8},end:{line:412,column:9}},"140":{start:{line:355,column:23},end:{line:355,column:38}},"141":{start:{line:356,column:31},end:{line:356,column:63}},"142":{start:{line:357,column:12},end:{line:362,column:19}},"143":{start:{line:360,column:20},end:{line:360,column:39}},"144":{start:{line:361,column:20},end:{line:361,column:60}},"145":{start:{line:364,column:12},end:{line:369,column:19}},"146":{start:{line:367,column:20},end:{line:367,column:39}},"147":{start:{line:368,column:20},end:{line:368,column:87}},"148":{start:{line:371,column:31},end:{line:376,column:18}},"149":{start:{line:374,column:20},end:{line:374,column:39}},"150":{start:{line:375,column:20},end:{line:375,column:116}},"151":{start:{line:377,column:12},end:{line:391,column:13}},"152":{start:{line:378,column:16},end:{line:383,column:23}},"153":{start:{line:381,column:24},end:{line:381,column:43}},"154":{start:{line:382,column:24},end:{line:382,column:120}},"155":{start:{line:386,column:16},end:{line:390,column:23}},"156":{start:{line:389,column:24},end:{line:389,column:105}},"157":{start:{line:392,column:12},end:{line:392,column:81}},"158":{start:{line:394,column:12},end:{line:394,column:29}},"159":{start:{line:395,column:12},end:{line:395,column:76}},"160":{start:{line:396,column:12},end:{line:396,column:49}},"161":{start:{line:397,column:12},end:{line:411,column:13}},"162":{start:{line:398,column:16},end:{line:398,column:92}},"163":{start:{line:399,column:19},end:{line:411,column:13}},"164":{start:{line:400,column:16},end:{line:400,column:106}},"165":{start:{line:401,column:19},end:{line:411,column:13}},"166":{start:{line:402,column:16},end:{line:402,column:116}},"167":{start:{line:403,column:19},end:{line:411,column:13}},"168":{start:{line:404,column:16},end:{line:404,column:168}},"169":{start:{line:405,column:19},end:{line:411,column:13}},"170":{start:{line:406,column:16},end:{line:406,column:168}},"171":{start:{line:407,column:19},end:{line:411,column:13}},"172":{start:{line:408,column:16},end:{line:408,column:153}},"173":{start:{line:410,column:16},end:{line:410,column:73}},"174":{start:{line:415,column:29},end:{line:415,column:33}},"175":{start:{line:416,column:8},end:{line:469,column:9}},"176":{start:{line:417,column:23},end:{line:417,column:38}},"177":{start:{line:418,column:31},end:{line:418,column:63}},"178":{start:{line:419,column:12},end:{line:424,column:19}},"179":{start:{line:422,column:20},end:{line:422,column:39}},"180":{start:{line:423,column:20},end:{line:423,column:60}},"181":{start:{line:425,column:12},end:{line:425,column:61}},"182":{start:{line:426,column:12},end:{line:431,column:19}},"183":{start:{line:429,column:20},end:{line:429,column:39}},"184":{start:{line:430,column:20},end:{line:430,column:123}},"185":{start:{line:433,column:12},end:{line:448,column:13}},"186":{start:{line:434,column:16},end:{line:434,column:65}},"187":{start:{line:435,column:16},end:{line:440,column:23}},"188":{start:{line:438,column:24},end:{line:438,column:43}},"189":{start:{line:439,column:24},end:{line:439,column:120}},"190":{start:{line:441,column:16},end:{line:441,column:66}},"191":{start:{line:443,column:16},end:{line:447,column:23}},"192":{start:{line:446,column:24},end:{line:446,column:105}},"193":{start:{line:449,column:12},end:{line:454,column:18}},"194":{start:{line:452,column:20},end:{line:452,column:39}},"195":{start:{line:453,column:20},end:{line:453,column:87}},"196":{start:{line:455,column:12},end:{line:455,column:82}},"197":{start:{line:457,column:12},end:{line:457,column:28}},"198":{start:{line:458,column:12},end:{line:458,column:76}},"199":{start:{line:459,column:12},end:{line:459,column:49}},"200":{start:{line:460,column:12},end:{line:468,column:13}},"201":{start:{line:461,column:16},end:{line:461,column:92}},"202":{start:{line:462,column:19},end:{line:468,column:13}},"203":{start:{line:463,column:16},end:{line:463,column:106}},"204":{start:{line:464,column:19},end:{line:468,column:13}},"205":{start:{line:465,column:16},end:{line:465,column:116}},"206":{start:{line:467,column:16},end:{line:467,column:73}},"207":{start:{line:472,column:29},end:{line:472,column:33}},"208":{start:{line:474,column:8},end:{line:539,column:9}},"209":{start:{line:475,column:12},end:{line:480,column:19}},"210":{start:{line:478,column:20},end:{line:478,column:39}},"211":{start:{line:479,column:20},end:{line:479,column:60}},"212":{start:{line:482,column:12},end:{line:487,column:19}},"213":{start:{line:485,column:20},end:{line:485,column:39}},"214":{start:{line:486,column:20},end:{line:486,column:94}},"215":{start:{line:489,column:12},end:{line:494,column:19}},"216":{start:{line:492,column:20},end:{line:492,column:39}},"217":{start:{line:493,column:20},end:{line:493,column:87}},"218":{start:{line:496,column:12},end:{line:501,column:19}},"219":{start:{line:499,column:20},end:{line:499,column:39}},"220":{start:{line:500,column:20},end:{line:500,column:122}},"221":{start:{line:503,column:12},end:{line:508,column:18}},"222":{start:{line:506,column:20},end:{line:506,column:39}},"223":{start:{line:507,column:20},end:{line:507,column:123}},"224":{start:{line:510,column:29},end:{line:515,column:18}},"225":{start:{line:513,column:20},end:{line:513,column:39}},"226":{start:{line:514,column:20},end:{line:514,column:85}},"227":{start:{line:517,column:12},end:{line:517,column:113}},"228":{start:{line:519,column:12},end:{line:519,column:110}},"229":{start:{line:521,column:12},end:{line:521,column:29}},"230":{start:{line:522,column:12},end:{line:522,column:76}},"231":{start:{line:523,column:12},end:{line:523,column:49}},"232":{start:{line:524,column:12},end:{line:538,column:13}},"233":{start:{line:525,column:16},end:{line:525,column:92}},"234":{start:{line:526,column:19},end:{line:538,column:13}},"235":{start:{line:527,column:16},end:{line:527,column:134}},"236":{start:{line:528,column:19},end:{line:538,column:13}},"237":{start:{line:529,column:16},end:{line:529,column:144}},"238":{start:{line:530,column:19},end:{line:538,column:13}},"239":{start:{line:531,column:16},end:{line:531,column:164}},"240":{start:{line:532,column:19},end:{line:538,column:13}},"241":{start:{line:533,column:16},end:{line:533,column:149}},"242":{start:{line:534,column:19},end:{line:538,column:13}},"243":{start:{line:535,column:16},end:{line:535,column:149}},"244":{start:{line:537,column:16},end:{line:537,column:73}},"245":{start:{line:542,column:8},end:{line:558,column:9}},"246":{start:{line:543,column:12},end:{line:553,column:13}},"247":{start:{line:544,column:40},end:{line:549,column:26}},"248":{start:{line:548,column:28},end:{line:548,column:110}},"249":{start:{line:550,column:16},end:{line:550,column:135}},"250":{start:{line:552,column:16},end:{line:552,column:61}},"251":{start:{line:555,column:12},end:{line:555,column:86}},"252":{start:{line:556,column:12},end:{line:556,column:49}},"253":{start:{line:557,column:12},end:{line:557,column:29}},"254":{start:{line:563,column:8},end:{line:581,column:9}},"255":{start:{line:564,column:12},end:{line:575,column:13}},"256":{start:{line:565,column:27},end:{line:565,column:53}},"257":{start:{line:566,column:35},end:{line:566,column:67}},"258":{start:{line:567,column:16},end:{line:571,column:22}},"259":{start:{line:570,column:24},end:{line:570,column:64}},"260":{start:{line:572,column:16},end:{line:572,column:88}},"261":{start:{line:574,column:16},end:{line:574,column:61}},"262":{start:{line:578,column:12},end:{line:578,column:87}},"263":{start:{line:579,column:12},end:{line:579,column:49}},"264":{start:{line:580,column:12},end:{line:580,column:88}},"265":{start:{line:584,column:8},end:{line:587,column:9}},"266":{start:{line:585,column:12},end:{line:585,column:90}}},fnMap:{"0":{name:"device_api_request_data",decl:{start:{line:13,column:9},end:{line:13,column:32}},loc:{start:{line:13,column:45},end:{line:74,column:1}},line:13},"1":{name:"convert_names_devices",decl:{start:{line:76,column:9},end:{line:76,column:30}},loc:{start:{line:76,column:40},end:{line:124,column:1}},line:76},"2":{name:"convert_name_device_single",decl:{start:{line:126,column:9},end:{line:126,column:35}},loc:{start:{line:126,column:44},end:{line:145,column:1}},line:126},"3":{name:"convert_names_device_activation",decl:{start:{line:147,column:9},end:{line:147,column:40}},loc:{start:{line:147,column:49},end:{line:160,column:1}},line:147},"4":{name:"get_devices",decl:{start:{line:162,column:15},end:{line:162,column:26}},loc:{start:{line:162,column:28},end:{line:175,column:1}},line:162},"5":{name:"(anonymous_5)",decl:{start:{line:166,column:19},end:{line:166,column:20}},loc:{start:{line:166,column:26},end:{line:169,column:13}},line:166},"6":{name:"get_device_activation",decl:{start:{line:176,column:15},end:{line:176,column:36}},loc:{start:{line:176,column:49},end:{line:188,column:1}},line:176},"7":{name:"(anonymous_7)",decl:{start:{line:179,column:19},end:{line:179,column:20}},loc:{start:{line:179,column:26},end:{line:182,column:13}},line:179},"8":{name:"parse_vessel_to_device_data",decl:{start:{line:190,column:9},end:{line:190,column:36}},loc:{start:{line:190,column:78},end:{line:215,column:1}},line:190},"9":{name:"add_device_to_default_vessel",decl:{start:{line:216,column:15},end:{line:216,column:43}},loc:{start:{line:216,column:82},end:{line:232,column:1}},line:216},"10":{name:"(anonymous_10)",decl:{start:{line:219,column:19},end:{line:219,column:20}},loc:{start:{line:219,column:26},end:{line:222,column:13}},line:219},"11":{name:"(anonymous_11)",decl:{start:{line:224,column:19},end:{line:224,column:20}},loc:{start:{line:224,column:26},end:{line:227,column:13}},line:224},"12":{name:"(anonymous_12)",decl:{start:{line:235,column:9},end:{line:235,column:10}},loc:{start:{line:235,column:33},end:{line:303,column:5}},line:235},"13":{name:"(anonymous_13)",decl:{start:{line:240,column:23},end:{line:240,column:24}},loc:{start:{line:240,column:30},end:{line:244,column:17}},line:240},"14":{name:"(anonymous_14)",decl:{start:{line:247,column:23},end:{line:247,column:24}},loc:{start:{line:247,column:30},end:{line:251,column:17}},line:247},"15":{name:"(anonymous_15)",decl:{start:{line:254,column:23},end:{line:254,column:24}},loc:{start:{line:254,column:30},end:{line:258,column:17}},line:254},"16":{name:"(anonymous_16)",decl:{start:{line:261,column:27},end:{line:261,column:28}},loc:{start:{line:261,column:34},end:{line:265,column:21}},line:261},"17":{name:"(anonymous_17)",decl:{start:{line:270,column:39},end:{line:270,column:40}},loc:{start:{line:270,column:46},end:{line:273,column:33}},line:270},"18":{name:"(anonymous_18)",decl:{start:{line:280,column:23},end:{line:280,column:24}},loc:{start:{line:280,column:30},end:{line:284,column:17}},line:280},"19":{name:"(anonymous_19)",decl:{start:{line:304,column:13},end:{line:304,column:14}},loc:{start:{line:304,column:37},end:{line:320,column:5}},line:304},"20":{name:"(anonymous_20)",decl:{start:{line:307,column:19},end:{line:307,column:20}},loc:{start:{line:307,column:26},end:{line:310,column:15}},line:307},"21":{name:"(anonymous_21)",decl:{start:{line:321,column:18},end:{line:321,column:19}},loc:{start:{line:321,column:42},end:{line:335,column:5}},line:321},"22":{name:"(anonymous_22)",decl:{start:{line:325,column:23},end:{line:325,column:24}},loc:{start:{line:325,column:30},end:{line:329,column:17}},line:325},"23":{name:"(anonymous_23)",decl:{start:{line:336,column:14},end:{line:336,column:15}},loc:{start:{line:336,column:40},end:{line:350,column:5}},line:336},"24":{name:"(anonymous_24)",decl:{start:{line:340,column:23},end:{line:340,column:24}},loc:{start:{line:340,column:30},end:{line:344,column:17}},line:340},"25":{name:"(anonymous_25)",decl:{start:{line:351,column:12},end:{line:351,column:13}},loc:{start:{line:351,column:36},end:{line:413,column:5}},line:351},"26":{name:"(anonymous_26)",decl:{start:{line:358,column:23},end:{line:358,column:24}},loc:{start:{line:358,column:30},end:{line:362,column:17}},line:358},"27":{name:"(anonymous_27)",decl:{start:{line:365,column:23},end:{line:365,column:24}},loc:{start:{line:365,column:30},end:{line:369,column:17}},line:365},"28":{name:"(anonymous_28)",decl:{start:{line:372,column:23},end:{line:372,column:24}},loc:{start:{line:372,column:30},end:{line:376,column:17}},line:372},"29":{name:"(anonymous_29)",decl:{start:{line:379,column:27},end:{line:379,column:28}},loc:{start:{line:379,column:34},end:{line:383,column:21}},line:379},"30":{name:"(anonymous_30)",decl:{start:{line:387,column:27},end:{line:387,column:28}},loc:{start:{line:387,column:34},end:{line:390,column:21}},line:387},"31":{name:"(anonymous_31)",decl:{start:{line:414,column:12},end:{line:414,column:13}},loc:{start:{line:414,column:36},end:{line:470,column:5}},line:414},"32":{name:"(anonymous_32)",decl:{start:{line:420,column:23},end:{line:420,column:24}},loc:{start:{line:420,column:30},end:{line:424,column:17}},line:420},"33":{name:"(anonymous_33)",decl:{start:{line:427,column:23},end:{line:427,column:24}},loc:{start:{line:427,column:30},end:{line:431,column:17}},line:427},"34":{name:"(anonymous_34)",decl:{start:{line:436,column:27},end:{line:436,column:28}},loc:{start:{line:436,column:34},end:{line:440,column:21}},line:436},"35":{name:"(anonymous_35)",decl:{start:{line:444,column:27},end:{line:444,column:28}},loc:{start:{line:444,column:34},end:{line:447,column:21}},line:444},"36":{name:"(anonymous_36)",decl:{start:{line:450,column:23},end:{line:450,column:24}},loc:{start:{line:450,column:30},end:{line:454,column:17}},line:450},"37":{name:"(anonymous_37)",decl:{start:{line:471,column:12},end:{line:471,column:13}},loc:{start:{line:471,column:36},end:{line:540,column:5}},line:471},"38":{name:"(anonymous_38)",decl:{start:{line:476,column:23},end:{line:476,column:24}},loc:{start:{line:476,column:30},end:{line:480,column:17}},line:476},"39":{name:"(anonymous_39)",decl:{start:{line:483,column:23},end:{line:483,column:24}},loc:{start:{line:483,column:30},end:{line:487,column:17}},line:483},"40":{name:"(anonymous_40)",decl:{start:{line:490,column:23},end:{line:490,column:24}},loc:{start:{line:490,column:30},end:{line:494,column:17}},line:490},"41":{name:"(anonymous_41)",decl:{start:{line:497,column:23},end:{line:497,column:24}},loc:{start:{line:497,column:30},end:{line:501,column:17}},line:497},"42":{name:"(anonymous_42)",decl:{start:{line:504,column:23},end:{line:504,column:24}},loc:{start:{line:504,column:30},end:{line:508,column:17}},line:504},"43":{name:"(anonymous_43)",decl:{start:{line:511,column:23},end:{line:511,column:24}},loc:{start:{line:511,column:30},end:{line:515,column:17}},line:511},"44":{name:"(anonymous_44)",decl:{start:{line:541,column:28},end:{line:541,column:29}},loc:{start:{line:541,column:53},end:{line:561,column:5}},line:541},"45":{name:"(anonymous_45)",decl:{start:{line:546,column:24},end:{line:546,column:25}},loc:{start:{line:546,column:31},end:{line:549,column:25}},line:546},"46":{name:"(anonymous_46)",decl:{start:{line:562,column:31},end:{line:562,column:32}},loc:{start:{line:562,column:57},end:{line:582,column:5}},line:562},"47":{name:"(anonymous_47)",decl:{start:{line:568,column:27},end:{line:568,column:28}},loc:{start:{line:568,column:34},end:{line:571,column:21}},line:568},"48":{name:"(anonymous_48)",decl:{start:{line:583,column:31},end:{line:583,column:32}},loc:{start:{line:583,column:57},end:{line:588,column:5}},line:583}},branchMap:{"0":{loc:{start:{line:15,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:72,column:5}},{start:{line:15,column:4},end:{line:72,column:5}}],line:15},"1":{loc:{start:{line:22,column:9},end:{line:72,column:5}},type:"if",locations:[{start:{line:22,column:9},end:{line:72,column:5}},{start:{line:22,column:9},end:{line:72,column:5}}],line:22},"2":{loc:{start:{line:23,column:8},end:{line:46,column:8}},type:"if",locations:[{start:{line:23,column:8},end:{line:46,column:8}},{start:{line:23,column:8},end:{line:46,column:8}}],line:23},"3":{loc:{start:{line:47,column:11},end:{line:72,column:5}},type:"if",locations:[{start:{line:47,column:11},end:{line:72,column:5}},{start:{line:47,column:11},end:{line:72,column:5}}],line:47},"4":{loc:{start:{line:59,column:11},end:{line:72,column:5}},type:"if",locations:[{start:{line:59,column:11},end:{line:72,column:5}},{start:{line:59,column:11},end:{line:72,column:5}}],line:59},"5":{loc:{start:{line:194,column:16},end:{line:196,column:17}},type:"if",locations:[{start:{line:194,column:16},end:{line:196,column:17}},{start:{line:194,column:16},end:{line:196,column:17}}],line:194},"6":{loc:{start:{line:198,column:12},end:{line:209,column:13}},type:"if",locations:[{start:{line:198,column:12},end:{line:209,column:13}},{start:{line:198,column:12},end:{line:209,column:13}}],line:198},"7":{loc:{start:{line:202,column:20},end:{line:207,column:19}},type:"if",locations:[{start:{line:202,column:20},end:{line:207,column:19}},{start:{line:202,column:20},end:{line:207,column:19}}],line:202},"8":{loc:{start:{line:259,column:12},end:{line:277,column:13}},type:"if",locations:[{start:{line:259,column:12},end:{line:277,column:13}},{start:{line:259,column:12},end:{line:277,column:13}}],line:259},"9":{loc:{start:{line:268,column:24},end:{line:274,column:25}},type:"if",locations:[{start:{line:268,column:24},end:{line:274,column:25}},{start:{line:268,column:24},end:{line:274,column:25}}],line:268},"10":{loc:{start:{line:293,column:12},end:{line:301,column:13}},type:"if",locations:[{start:{line:293,column:12},end:{line:301,column:13}},{start:{line:293,column:12},end:{line:301,column:13}}],line:293},"11":{loc:{start:{line:295,column:19},end:{line:301,column:13}},type:"if",locations:[{start:{line:295,column:19},end:{line:301,column:13}},{start:{line:295,column:19},end:{line:301,column:13}}],line:295},"12":{loc:{start:{line:297,column:19},end:{line:301,column:13}},type:"if",locations:[{start:{line:297,column:19},end:{line:301,column:13}},{start:{line:297,column:19},end:{line:301,column:13}}],line:297},"13":{loc:{start:{line:377,column:12},end:{line:391,column:13}},type:"if",locations:[{start:{line:377,column:12},end:{line:391,column:13}},{start:{line:377,column:12},end:{line:391,column:13}}],line:377},"14":{loc:{start:{line:397,column:12},end:{line:411,column:13}},type:"if",locations:[{start:{line:397,column:12},end:{line:411,column:13}},{start:{line:397,column:12},end:{line:411,column:13}}],line:397},"15":{loc:{start:{line:399,column:19},end:{line:411,column:13}},type:"if",locations:[{start:{line:399,column:19},end:{line:411,column:13}},{start:{line:399,column:19},end:{line:411,column:13}}],line:399},"16":{loc:{start:{line:401,column:19},end:{line:411,column:13}},type:"if",locations:[{start:{line:401,column:19},end:{line:411,column:13}},{start:{line:401,column:19},end:{line:411,column:13}}],line:401},"17":{loc:{start:{line:403,column:19},end:{line:411,column:13}},type:"if",locations:[{start:{line:403,column:19},end:{line:411,column:13}},{start:{line:403,column:19},end:{line:411,column:13}}],line:403},"18":{loc:{start:{line:405,column:19},end:{line:411,column:13}},type:"if",locations:[{start:{line:405,column:19},end:{line:411,column:13}},{start:{line:405,column:19},end:{line:411,column:13}}],line:405},"19":{loc:{start:{line:407,column:19},end:{line:411,column:13}},type:"if",locations:[{start:{line:407,column:19},end:{line:411,column:13}},{start:{line:407,column:19},end:{line:411,column:13}}],line:407},"20":{loc:{start:{line:433,column:12},end:{line:448,column:13}},type:"if",locations:[{start:{line:433,column:12},end:{line:448,column:13}},{start:{line:433,column:12},end:{line:448,column:13}}],line:433},"21":{loc:{start:{line:460,column:12},end:{line:468,column:13}},type:"if",locations:[{start:{line:460,column:12},end:{line:468,column:13}},{start:{line:460,column:12},end:{line:468,column:13}}],line:460},"22":{loc:{start:{line:462,column:19},end:{line:468,column:13}},type:"if",locations:[{start:{line:462,column:19},end:{line:468,column:13}},{start:{line:462,column:19},end:{line:468,column:13}}],line:462},"23":{loc:{start:{line:464,column:19},end:{line:468,column:13}},type:"if",locations:[{start:{line:464,column:19},end:{line:468,column:13}},{start:{line:464,column:19},end:{line:468,column:13}}],line:464},"24":{loc:{start:{line:524,column:12},end:{line:538,column:13}},type:"if",locations:[{start:{line:524,column:12},end:{line:538,column:13}},{start:{line:524,column:12},end:{line:538,column:13}}],line:524},"25":{loc:{start:{line:526,column:19},end:{line:538,column:13}},type:"if",locations:[{start:{line:526,column:19},end:{line:538,column:13}},{start:{line:526,column:19},end:{line:538,column:13}}],line:526},"26":{loc:{start:{line:528,column:19},end:{line:538,column:13}},type:"if",locations:[{start:{line:528,column:19},end:{line:538,column:13}},{start:{line:528,column:19},end:{line:538,column:13}}],line:528},"27":{loc:{start:{line:530,column:19},end:{line:538,column:13}},type:"if",locations:[{start:{line:530,column:19},end:{line:538,column:13}},{start:{line:530,column:19},end:{line:538,column:13}}],line:530},"28":{loc:{start:{line:532,column:19},end:{line:538,column:13}},type:"if",locations:[{start:{line:532,column:19},end:{line:538,column:13}},{start:{line:532,column:19},end:{line:538,column:13}}],line:532},"29":{loc:{start:{line:534,column:19},end:{line:538,column:13}},type:"if",locations:[{start:{line:534,column:19},end:{line:538,column:13}},{start:{line:534,column:19},end:{line:538,column:13}}],line:534},"30":{loc:{start:{line:543,column:12},end:{line:553,column:13}},type:"if",locations:[{start:{line:543,column:12},end:{line:553,column:13}},{start:{line:543,column:12},end:{line:553,column:13}}],line:543},"31":{loc:{start:{line:564,column:12},end:{line:575,column:13}},type:"if",locations:[{start:{line:564,column:12},end:{line:575,column:13}},{start:{line:564,column:12},end:{line:575,column:13}}],line:564}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();const lora_app_server=(cov_1drmyaw665.s[0]++,require("../services/API/lora_app_server"));const db=(cov_1drmyaw665.s[1]++,require("../services/database/devices_db"));const DB_VESSEL_DEVICE=(cov_1drmyaw665.s[2]++,require("../services/database/vessel_device_db"));const DB_VESSEL=(cov_1drmyaw665.s[3]++,require("../services/database/vessels_db"));const DB_USER_VESSEL=(cov_1drmyaw665.s[4]++,require("../services/database/user_vessel_db"));const DB_DEVICE_UPLINK=(cov_1drmyaw665.s[5]++,require("../services/database/device_rx_db"));const compare=(cov_1drmyaw665.s[6]++,require("../services/compare"));const error=(cov_1drmyaw665.s[7]++,require("../services/errors"));const VError=(cov_1drmyaw665.s[8]++,require("verror"));const error_handler=(cov_1drmyaw665.s[9]++,require('./error_logs'));function device_api_request_data(data,type){cov_1drmyaw665.f[0]++;let request;cov_1drmyaw665.s[10]++;if(type==0){cov_1drmyaw665.b[0][0]++;cov_1drmyaw665.s[11]++;//get form 
request={limit:100//offset: null,
//search: null
};}else{cov_1drmyaw665.b[0][1]++;cov_1drmyaw665.s[12]++;if(type==1){cov_1drmyaw665.b[1][0]++;cov_1drmyaw665.s[13]++;//create form
if(data.reference_altitude==""){cov_1drmyaw665.b[2][0]++;cov_1drmyaw665.s[14]++;request={device:{"name":`${data.device_name}`,"devEUI":`${data.device_eui}`,"description":`${data.device_description}`,"applicationID":`${data.sub_network_id}`,"deviceProfileID":`${data.device_profile_id_lora}`,"skipFCntCheck":data.skip_frame_counter}};}else{cov_1drmyaw665.b[2][1]++;cov_1drmyaw665.s[15]++;request={"device":{"name":`${data.device_name}`,"devEUI":`${data.device_eui}`,"description":`${data.device_description}`,"applicationID":`${data.sub_network_id}`,"deviceProfileID":`${data.device_profile_id_lora}`,"referenceAltitude":data.reference_altitude,"skipFCntCheck":data.skip_frame_counter}};}}else{cov_1drmyaw665.b[1][1]++;cov_1drmyaw665.s[16]++;if(type==2){cov_1drmyaw665.b[3][0]++;cov_1drmyaw665.s[17]++;//Update form
request={"device":{"name":`${data.device_name}`,"devEUI":`${data.device_eui}`,"description":`${data.device_description}`,"applicationID":`${data.sub_network_id}`,"deviceProfileID":`${data.device_profile_id_lora}`,"referenceAltitude":data.reference_altitude,"skipFCntCheck":data.skip_frame_counter}};}else{cov_1drmyaw665.b[3][1]++;cov_1drmyaw665.s[18]++;if(type==3){cov_1drmyaw665.b[4][0]++;cov_1drmyaw665.s[19]++;//Device Activation form 
request={"deviceActivation":{"devEUI":`${data.device_eui}`,"devAddr":`${data.dev_addr}`,"appSKey":`${data.app_s_key}`,"nwkSEncKey":`${data.nwk_s_enc_key}`,"sNwkSIntKey":`${data.nwk_s_enc_key}`,"fNwkSIntKey":`${data.nwk_s_enc_key}`,"fCntUp":data.f_cnt_up,"nFCntDown":data.n_f_cnt_down}};}else{cov_1drmyaw665.b[4][1]++;}}}}cov_1drmyaw665.s[20]++;return request;}function convert_names_devices(devices){cov_1drmyaw665.f[1]++;let devices_return=(cov_1drmyaw665.s[21]++,[]);let device=(cov_1drmyaw665.s[22]++,{sub_network_id:null,device_description:null,device_eui:null,device_profile_id_lora:null,device_profile_name:null,device_status_battery:null,device_status_battery_level:null,device_status_battery_level_unavailable:null,device_status_external_power_source:null,device_status_margin:null,last_seen_at:null,device_name:null,deleted:0//this is here so when we are editing the users who are fishers we will only be able to assign them to current devices
});cov_1drmyaw665.s[23]++;for(let i=0;i<devices.length;i++){cov_1drmyaw665.s[24]++;device.sub_network_id=devices[i].applicationID;cov_1drmyaw665.s[25]++;device.device_description=devices[i].description;cov_1drmyaw665.s[26]++;device.device_eui=devices[i].devEUI;cov_1drmyaw665.s[27]++;device.device_profile_id_lora=devices[i].deviceProfileID;cov_1drmyaw665.s[28]++;device.device_profile_name=devices[i].deviceProfileName;cov_1drmyaw665.s[29]++;device.device_status_battery=devices[i].deviceStatusBattery;cov_1drmyaw665.s[30]++;device.device_status_battery_level=devices[i].deviceStatusBatteryLevel;cov_1drmyaw665.s[31]++;device.device_status_battery_level_unavailable=devices[i].deviceStatusBatteryLevelUnavailable;cov_1drmyaw665.s[32]++;device.device_status_external_power_source=devices[i].deviceStatusExternalPowerSource;cov_1drmyaw665.s[33]++;device.device_status_margin=devices[i].deviceStatusMargin;cov_1drmyaw665.s[34]++;device.last_seen_at=devices[i].lastSeenAt;cov_1drmyaw665.s[35]++;device.device_name=devices[i].name;cov_1drmyaw665.s[36]++;devices_return[i]=device;cov_1drmyaw665.s[37]++;device={sub_network_id:null,device_description:null,device_eui:null,device_profile_id_lora:null,device_profile_name:null,device_status_battery:null,device_status_battery_level:null,device_status_battery_level_unavailable:null,device_status_external_power_source:null,device_status_margin:null,last_seen_at:null,device_name:null,deleted:0};}cov_1drmyaw665.s[38]++;return devices_return;}function convert_name_device_single(result){cov_1drmyaw665.f[2]++;let device=(cov_1drmyaw665.s[39]++,{sub_network_id:result.device.applicationID,device_description:result.device.description,device_eui:result.device.devEUI,device_profile_id_lora:result.device.deviceProfileID,device_name:result.device.name,reference_altitude:result.device.referenceAltitude,skip_frame_counter:result.device.skipFCntCheck,device_status_battery:result.deviceStatusBattery,device_status_margin:result.deviceStatusMargin,last_seen_at:result.lastSeenAt/*         device_accuracy: result.location.accuracy,
        device_altitude: result.location.altitude,
        device_latitude: result.location.latitude,
        device_longitude: result.location.longitude,
        device_location_source: result.location.source,     */});cov_1drmyaw665.s[40]++;return device;}function convert_names_device_activation(result){cov_1drmyaw665.f[3]++;let device_activation=(cov_1drmyaw665.s[41]++,{device_eui:result.deviceActivation.devEUI,dev_addr:result.deviceActivation.devAddr,app_s_key:result.deviceActivation.appSKey,nwk_s_enc_key:result.deviceActivation.nwkSEncKey,f_cnt_up:result.deviceActivation.fCntUp,n_f_cnt_down:result.deviceActivation.nFCntDown/*      s_nwk_s_int_key: result.deviceActivation.sNwkSIntKey:,
            f_nwk_s_int_key: result.deviceActivation.fNwkSIntKey:,
            a_f_cnt_down: result.deviceActivation.aFCntDown:,     */});cov_1drmyaw665.s[42]++;return device_activation;}async function get_devices(){cov_1drmyaw665.f[4]++;cov_1drmyaw665.s[43]++;try{let request_params=(cov_1drmyaw665.s[44]++,device_api_request_data(null,0));let devices_lora=(cov_1drmyaw665.s[45]++,await lora_app_server.get_devices(request_params).catch(err=>{cov_1drmyaw665.f[5]++;cov_1drmyaw665.s[46]++;//Error getting devices from lora app server
throw error_handler.error_message(err);}));cov_1drmyaw665.s[47]++;devices_lora=convert_names_devices(devices_lora.data.result);cov_1drmyaw665.s[48]++;return devices_lora;}catch(err){cov_1drmyaw665.s[49]++;throw err;}}async function get_device_activation(device_eui){cov_1drmyaw665.f[6]++;cov_1drmyaw665.s[50]++;try{let device_activation=(cov_1drmyaw665.s[51]++,await lora_app_server.get_devices_activation(device_eui).catch(err=>{cov_1drmyaw665.f[7]++;cov_1drmyaw665.s[52]++;//Error getting device activation from lora app server
throw error_handler.error_message(err);}));cov_1drmyaw665.s[53]++;device_activation=convert_names_device_activation(device_activation.data);cov_1drmyaw665.s[54]++;return device_activation;}catch(err){cov_1drmyaw665.s[55]++;throw err;}}function parse_vessel_to_device_data(vessel_device,devices_lora,devices_db){cov_1drmyaw665.f[8]++;cov_1drmyaw665.s[56]++;try{cov_1drmyaw665.s[57]++;for(let i=0;i<devices_lora.length;i++){cov_1drmyaw665.s[58]++;for(let j=0;j<devices_db.length;j++){cov_1drmyaw665.s[59]++;if(devices_lora[i].device_eui==devices_db[j].device_eui){cov_1drmyaw665.b[5][0]++;cov_1drmyaw665.s[60]++;devices_lora[i]["device_id"]=devices_db[j].device_id;}else{cov_1drmyaw665.b[5][1]++;}}cov_1drmyaw665.s[61]++;if(vessel_device.length==0){cov_1drmyaw665.b[6][0]++;cov_1drmyaw665.s[62]++;devices_lora[i]["vessel_id"]="Null";}else{cov_1drmyaw665.b[6][1]++;cov_1drmyaw665.s[63]++;for(let j=0;j<vessel_device.length;j++){cov_1drmyaw665.s[64]++;if(devices_lora[i].device_eui==vessel_device[j].device_eui){cov_1drmyaw665.b[7][0]++;cov_1drmyaw665.s[65]++;devices_lora[i]["vessel_id"]=vessel_device[j].vessel_id;cov_1drmyaw665.s[66]++;break;}else{cov_1drmyaw665.b[7][1]++;cov_1drmyaw665.s[67]++;devices_lora[i]["vessel_id"]="Null";}}}}cov_1drmyaw665.s[68]++;return devices_lora;}catch(err){cov_1drmyaw665.s[69]++;throw err;}}async function add_device_to_default_vessel(device_id,device_eui,sub_network_id){cov_1drmyaw665.f[9]++;cov_1drmyaw665.s[70]++;try{let default_vessel=(cov_1drmyaw665.s[71]++,await DB_VESSEL.get_default_vessel_specified_sub_network(sub_network_id).catch(err=>{cov_1drmyaw665.f[10]++;cov_1drmyaw665.s[72]++;//Error fetching the default vessel for a given sub_network
throw error_message("get default vessel for sub-network : database",err.message);}));cov_1drmyaw665.s[73]++;await DB_VESSEL_DEVICE.create(device_id,device_eui,default_vessel[0].vessel_id).catch(err=>{cov_1drmyaw665.f[11]++;cov_1drmyaw665.s[74]++;//Error creating vessel device relationship 
throw error_message("create vessel device relationship : database",err.message);});cov_1drmyaw665.s[75]++;console.log("Device vessel relationship created. Default vessel");}catch(err){cov_1drmyaw665.s[76]++;throw err;}}cov_1drmyaw665.s[77]++;module.exports={get:async function(req,res){cov_1drmyaw665.f[12]++;let error_location=(cov_1drmyaw665.s[78]++,null);//0=lora, 1=db
let devices_lora,vessel_device_relationships_db;cov_1drmyaw665.s[79]++;try{cov_1drmyaw665.s[80]++;devices_lora=await get_devices().catch(err=>{cov_1drmyaw665.f[13]++;cov_1drmyaw665.s[81]++;//Error getting devices from lora app server
error_location=0;cov_1drmyaw665.s[82]++;throw error.error_message("get devices : lora app server",err.message);});//console.log("Devices fetched from the lora app server");
let devices_db=(cov_1drmyaw665.s[83]++,await db.get_not_deleted().catch(err=>{cov_1drmyaw665.f[14]++;cov_1drmyaw665.s[84]++;//error getting devices from db
error_location=1;cov_1drmyaw665.s[85]++;throw error.error_message("get devices : database",err.message);}));//console.log("Devices fetched from the database");
let devices_added=(cov_1drmyaw665.s[86]++,await compare.devices(devices_lora,devices_db).catch(err=>{cov_1drmyaw665.f[15]++;cov_1drmyaw665.s[87]++;//Error comparing devices
error_location=1;cov_1drmyaw665.s[88]++;throw error.error_message("get devices : database",err.message);}));cov_1drmyaw665.s[89]++;if(devices_added.length>0){cov_1drmyaw665.b[8][0]++;cov_1drmyaw665.s[90]++;devices_db=await db.get_not_deleted().catch(err=>{cov_1drmyaw665.f[16]++;cov_1drmyaw665.s[91]++;//error getting devices from db
error_location=1;cov_1drmyaw665.s[92]++;throw error.error_message("get devices : database",err.message);});cov_1drmyaw665.s[93]++;for(let i=0;i<devices_added.length;i++){cov_1drmyaw665.s[94]++;for(let j=0;j<devices_db.length;j++){cov_1drmyaw665.s[95]++;if(devices_added[i]==devices_db[j].device_eui){cov_1drmyaw665.b[9][0]++;cov_1drmyaw665.s[96]++;await add_device_to_default_vessel(`${devices_db[j].device_id}`,devices_db[j].device_eui,devices_db[j].sub_network_id).catch(err=>{cov_1drmyaw665.f[17]++;cov_1drmyaw665.s[97]++;//Error adding devices created on lora app server to default vessel
throw error.error_message("add device created on lora app server to default vessel",err.message);});}else{cov_1drmyaw665.b[9][1]++;}}}}else{cov_1drmyaw665.b[8][1]++;}//console.log("Devices information on lora app sevrer and database compared");
cov_1drmyaw665.s[98]++;vessel_device_relationships_db=await DB_VESSEL_DEVICE.get_not_deleted().catch(err=>{cov_1drmyaw665.f[18]++;cov_1drmyaw665.s[99]++;//Error getting vessel device relationships currently implemented
error_location=2;cov_1drmyaw665.s[100]++;throw error.error_message("get devices : getting vessel devices relationships : database",err.message);});//console.log('Vessel deivce realtionships currently implemented fetched');
cov_1drmyaw665.s[101]++;devices_lora=parse_vessel_to_device_data(vessel_device_relationships_db,devices_lora,devices_db);//console.log("Vessel assigned to device parsed");
cov_1drmyaw665.s[102]++;res.status(200).send({devices_lora:devices_lora,message:'Devices fetched',type:'success'});}catch(err){cov_1drmyaw665.s[103]++;console.log(err);cov_1drmyaw665.s[104]++;err=error_handler.error_message("Error getting devices",err);cov_1drmyaw665.s[105]++;error_handler.error_logger(req,err);cov_1drmyaw665.s[106]++;if(error_location==0){cov_1drmyaw665.b[10][0]++;cov_1drmyaw665.s[107]++;res.status(500).send({message:"Failed to get devices",type:'error'});}else{cov_1drmyaw665.b[10][1]++;cov_1drmyaw665.s[108]++;if(error_location==1){cov_1drmyaw665.b[11][0]++;cov_1drmyaw665.s[109]++;res.status(200).send({devices_lora:devices_lora,message:"Error updating devices in database",type:'info'});}else{cov_1drmyaw665.b[11][1]++;cov_1drmyaw665.s[110]++;if(error_location==2){cov_1drmyaw665.b[12][0]++;cov_1drmyaw665.s[111]++;res.status(200).send({devices_lora:devices_lora,message:"Error pasing vessel ID to deivce data",type:'info'});}else{cov_1drmyaw665.b[12][1]++;cov_1drmyaw665.s[112]++;res.status(500).send({message:'Error',type:'error'});}}}}},get_one:async function(req,res){cov_1drmyaw665.f[19]++;cov_1drmyaw665.s[113]++;try{let device=(cov_1drmyaw665.s[114]++,await lora_app_server.get_device_one(req.params.device_eui).catch(err=>{cov_1drmyaw665.f[20]++;cov_1drmyaw665.s[115]++;//Error getting device from lora app server
throw error_handler.error_message(err);}));cov_1drmyaw665.s[116]++;device=convert_name_device_single(device.data);cov_1drmyaw665.s[117]++;res.status(200).send({device});}catch(err){cov_1drmyaw665.s[118]++;console.log(err);cov_1drmyaw665.s[119]++;err=error_handler.error_message("Error getting device",err);cov_1drmyaw665.s[120]++;error_handler.error_logger(req,err);cov_1drmyaw665.s[121]++;res.status(500).send({message:"Failed to get device",type:'error'});}},get_database:async function(req,res){cov_1drmyaw665.f[21]++;cov_1drmyaw665.s[122]++;try{let vessels=(cov_1drmyaw665.s[123]++,req.params.vessels);let devices=(cov_1drmyaw665.s[124]++,await DB_VESSEL_DEVICE.get_all_given_vessels(vessels).catch(err=>{cov_1drmyaw665.f[22]++;cov_1drmyaw665.s[125]++;//Error getting vessel device relationships currently implemented
error_location=2;cov_1drmyaw665.s[126]++;throw error.error_message("get devices : getting vessel devices relationships : database",err.message);}));cov_1drmyaw665.s[127]++;res.status(200).send({devices:devices,message:'Devices fetched',type:'success'});}catch(err){cov_1drmyaw665.s[128]++;console.log(err);cov_1drmyaw665.s[129]++;res.status(500).send({message:"Failed to get device",type:'error'});}},get_self:async function(req,res){cov_1drmyaw665.f[23]++;cov_1drmyaw665.s[130]++;try{let user_vessel_info=(cov_1drmyaw665.s[131]++,JSON.parse(req.params.user_vessel_info));let devices=(cov_1drmyaw665.s[132]++,await DB_VESSEL_DEVICE.get_device_self(user_vessel_info).catch(err=>{cov_1drmyaw665.f[24]++;cov_1drmyaw665.s[133]++;//Error getting vessel device relationships currently implemented
error_location=2;cov_1drmyaw665.s[134]++;throw error.error_message("get devices : getting vessel devices relationships : database",err.message);}));cov_1drmyaw665.s[135]++;res.status(200).send({devices:devices,message:'Devices fetched',type:'success'});}catch(err){cov_1drmyaw665.s[136]++;console.log(err);cov_1drmyaw665.s[137]++;res.status(500).send({message:"Failed to get device",type:'error'});}},create:async function(req,res){cov_1drmyaw665.f[25]++;let error_location=(cov_1drmyaw665.s[138]++,null);//0=lora, 1=lora 2=db
let devices_lora;cov_1drmyaw665.s[139]++;try{let data=(cov_1drmyaw665.s[140]++,req.body.device);let request_body=(cov_1drmyaw665.s[141]++,device_api_request_data(data,1));cov_1drmyaw665.s[142]++;await lora_app_server.create_devices(request_body).catch(err=>{cov_1drmyaw665.f[26]++;cov_1drmyaw665.s[143]++;//Error creating device on lora app server
error_location=0;cov_1drmyaw665.s[144]++;throw error_handler.error_message(err);});//console.log('Device created on lora app server')
cov_1drmyaw665.s[145]++;await db.create(data.sub_network_id,data.device_profile_id_lora,data.device_eui,data.device_name,data.device_description).catch(err=>{cov_1drmyaw665.f[27]++;cov_1drmyaw665.s[146]++;//Error creating device on database
error_location=2;cov_1drmyaw665.s[147]++;throw error.error_message("create device : database",err.message);});//console.log('Device created in database')
let device_added=(cov_1drmyaw665.s[148]++,await db.get_newest().catch(err=>{cov_1drmyaw665.f[28]++;cov_1drmyaw665.s[149]++;//Error creating relationship between vessel and device
error_location=3;cov_1drmyaw665.s[150]++;throw error.error_message("create device : vessel device relationship : database",err.message);}));cov_1drmyaw665.s[151]++;if(data.vessel_id){cov_1drmyaw665.b[13][0]++;cov_1drmyaw665.s[152]++;//Device assigned to vessel 
await DB_VESSEL_DEVICE.create(device_added[0].device_id,data.device_eui,data.vessel_id).catch(err=>{cov_1drmyaw665.f[29]++;cov_1drmyaw665.s[153]++;//Error creating relationship between vessel and device
error_location=4;cov_1drmyaw665.s[154]++;throw error.error_message("create device : vessel device relationship : database",err.message);});//console.log("Device vessel relationship created");
}else{cov_1drmyaw665.b[13][1]++;cov_1drmyaw665.s[155]++;//Device not assigned to vessel so it will be assigned to the default vessel
await add_device_to_default_vessel(device_added[0].device_id,data.device_eui,data.sub_network_id).catch(err=>{cov_1drmyaw665.f[30]++;cov_1drmyaw665.s[156]++;//Error creating vessel device relationship 
throw error_message("create vessel device relationship : database",err.message);});}cov_1drmyaw665.s[157]++;res.status(201).send({message:'Device created',type:'success'});}catch(err){cov_1drmyaw665.s[158]++;console.log(err);cov_1drmyaw665.s[159]++;err=error_handler.error_message("Error creating device",err);cov_1drmyaw665.s[160]++;error_handler.error_logger(req,err);cov_1drmyaw665.s[161]++;if(error_location==0){cov_1drmyaw665.b[14][0]++;cov_1drmyaw665.s[162]++;res.status(500).send({message:"Failed to create device",type:'error'});}else{cov_1drmyaw665.b[14][1]++;cov_1drmyaw665.s[163]++;if(error_location==1){cov_1drmyaw665.b[15][0]++;cov_1drmyaw665.s[164]++;res.status(201).send({message:"Device created. Failed to fetch devices",type:'info'});}else{cov_1drmyaw665.b[15][1]++;cov_1drmyaw665.s[165]++;if(error_location==2){cov_1drmyaw665.b[16][0]++;cov_1drmyaw665.s[166]++;res.status(200).send({message:"Device created. Error creating device in database",type:'info'});}else{cov_1drmyaw665.b[16][1]++;cov_1drmyaw665.s[167]++;if(error_location==3){cov_1drmyaw665.b[17][0]++;cov_1drmyaw665.s[168]++;res.status(200).send({message:"Device created on lora app server and database. Error creating relationship between device and vessel",type:'info'});}else{cov_1drmyaw665.b[17][1]++;cov_1drmyaw665.s[169]++;if(error_location==4){cov_1drmyaw665.b[18][0]++;cov_1drmyaw665.s[170]++;res.status(200).send({message:"Device created on lora app server and database. Error creating relationship between device and vessel",type:'info'});}else{cov_1drmyaw665.b[18][1]++;cov_1drmyaw665.s[171]++;if(error_location==5){cov_1drmyaw665.b[19][0]++;cov_1drmyaw665.s[172]++;res.status(200).send({message:"Device created on lora app server and database. Error parsing vessel ID to device data",type:'info'});}else{cov_1drmyaw665.b[19][1]++;cov_1drmyaw665.s[173]++;res.status(500).send({message:'Error',type:'error'});}}}}}}}},update:async function(req,res){cov_1drmyaw665.f[31]++;let error_location=(cov_1drmyaw665.s[174]++,null);//0=lora, 1=lora 2=db
cov_1drmyaw665.s[175]++;try{let data=(cov_1drmyaw665.s[176]++,req.body.device);let request_data=(cov_1drmyaw665.s[177]++,device_api_request_data(data,2));cov_1drmyaw665.s[178]++;await lora_app_server.update_devices(request_data,req.params.device_eui).catch(err=>{cov_1drmyaw665.f[32]++;cov_1drmyaw665.s[179]++;//Error updating device on lora app server 
error_location=0;cov_1drmyaw665.s[180]++;throw error_handler.error_message(err);});cov_1drmyaw665.s[181]++;console.log('Device updated on lora app server');cov_1drmyaw665.s[182]++;await DB_VESSEL_DEVICE.delete_given_deivce_eui(data.device_eui).catch(err=>{cov_1drmyaw665.f[33]++;cov_1drmyaw665.s[183]++;//Error deleteing current relationship between that device and any previous vessel
error_location=3;cov_1drmyaw665.s[184]++;throw error.error_message("create device : delete vessel device relationship : database",err.message);});//Relationship between device and any vessel deleted
cov_1drmyaw665.s[185]++;if(data.vessel_id){cov_1drmyaw665.b[20][0]++;cov_1drmyaw665.s[186]++;console.log("Device vessel relationship exists");cov_1drmyaw665.s[187]++;await DB_VESSEL_DEVICE.create(data.device_id,data.device_eui,data.vessel_id).catch(err=>{cov_1drmyaw665.f[34]++;cov_1drmyaw665.s[188]++;//Error creating relationship between vessel and device
error_location=4;cov_1drmyaw665.s[189]++;throw error.error_message("create device : vessel device relationship : database",err.message);});cov_1drmyaw665.s[190]++;console.log("Device vessel relationship created");}else{cov_1drmyaw665.b[20][1]++;cov_1drmyaw665.s[191]++;//Device not assigned to vessel so it will be assigned to the default vessel
await add_device_to_default_vessel(data.device_id,data.device_eui,data.sub_network_id).catch(err=>{cov_1drmyaw665.f[35]++;cov_1drmyaw665.s[192]++;//Error creating vessel device relationship 
throw error_message("create vessel device relationship : database",err.message);});}cov_1drmyaw665.s[193]++;await db.update_all_parameters(data,req.params.device_eui).catch(err=>{cov_1drmyaw665.f[36]++;cov_1drmyaw665.s[194]++;//Error updating device record in the database
error_location=2;cov_1drmyaw665.s[195]++;throw error.error_message("update device : database",err.message);});cov_1drmyaw665.s[196]++;res.status(201).send({message:'Device updated.',type:'success'});}catch(err){cov_1drmyaw665.s[197]++;console.log(err);cov_1drmyaw665.s[198]++;err=error_handler.error_message("Error updating device",err);cov_1drmyaw665.s[199]++;error_handler.error_logger(req,err);cov_1drmyaw665.s[200]++;if(error_location==0){cov_1drmyaw665.b[21][0]++;cov_1drmyaw665.s[201]++;res.status(500).send({message:"Failed to update device",type:'error'});}else{cov_1drmyaw665.b[21][1]++;cov_1drmyaw665.s[202]++;if(error_location==1){cov_1drmyaw665.b[22][0]++;cov_1drmyaw665.s[203]++;res.status(200).send({message:"Device updated. Failed to fetch devices",type:'info'});}else{cov_1drmyaw665.b[22][1]++;cov_1drmyaw665.s[204]++;if(error_location==2){cov_1drmyaw665.b[23][0]++;cov_1drmyaw665.s[205]++;res.status(200).send({message:"Device updated. Error updating device in database",type:'info'});}else{cov_1drmyaw665.b[23][1]++;cov_1drmyaw665.s[206]++;res.status(500).send({message:'Error',type:'error'});}}}}},delete:async function(req,res){cov_1drmyaw665.f[37]++;let error_location=(cov_1drmyaw665.s[207]++,null);//0=lora, 1=lora 2=db
let devices_lora;cov_1drmyaw665.s[208]++;try{cov_1drmyaw665.s[209]++;await lora_app_server.delete_devices(req.params.device_eui).catch(err=>{cov_1drmyaw665.f[38]++;cov_1drmyaw665.s[210]++;//Error delete device form lora app server
error_location=0;cov_1drmyaw665.s[211]++;throw error_handler.error_message(err);});//console.log('Device deleted from lora app server. Device_EUI: ' + req.params.device_eui)
cov_1drmyaw665.s[212]++;devices_lora=await get_devices().catch(err=>{cov_1drmyaw665.f[39]++;cov_1drmyaw665.s[213]++;//Error getting devices from lora app server
error_location=1;cov_1drmyaw665.s[214]++;throw error.error_message("delete device : lora app server",err.message);});//console.log('Devices fetched from lora app server')
cov_1drmyaw665.s[215]++;await db.update('device_deleted',1,req.params.device_eui).catch(err=>{cov_1drmyaw665.f[40]++;cov_1drmyaw665.s[216]++;//Error deleting device from database
error_location=2;cov_1drmyaw665.s[217]++;throw error.error_message("delete device : database",err.message);});//console.log("Device deleted parameter set high in database. Device_EUI: " + req.params.device_eui);
cov_1drmyaw665.s[218]++;await DB_VESSEL_DEVICE.delete_given_deivce_eui(req.params.device_eui).catch(err=>{cov_1drmyaw665.f[41]++;cov_1drmyaw665.s[219]++;//Error deleting relationship between device and vessel from database
error_location=3;cov_1drmyaw665.s[220]++;throw error.error_message("delete device : delete device vessel relationship: database",err.message);});//console.log("Device vessel relationship deleted parameter set high in database. Device_EUI: " + req.params.device_eui);
cov_1drmyaw665.s[221]++;vessel_device_relationships_db=await DB_VESSEL_DEVICE.get_not_deleted().catch(err=>{cov_1drmyaw665.f[42]++;cov_1drmyaw665.s[222]++;//Error getting vessel device relationships that are not deleted
error_location=4;cov_1drmyaw665.s[223]++;throw error.error_message("get devices : getting vessel devices relationships :database",err.message);});//console.log('Vessel deivce realtionships currently implemented fetched');
let devices_db=(cov_1drmyaw665.s[224]++,await db.get_not_deleted().catch(err=>{cov_1drmyaw665.f[43]++;cov_1drmyaw665.s[225]++;//error getting devices from db
error_location=5;cov_1drmyaw665.s[226]++;throw error.error_message("get devices : database",err.message);}));//console.log('Devices fetched from database')
cov_1drmyaw665.s[227]++;devices_lora=parse_vessel_to_device_data(vessel_device_relationships_db,devices_lora,devices_db);//console.log("Vessel ID parsed to device data");
cov_1drmyaw665.s[228]++;res.status(200).send({devices_lora:devices_lora,message:'Device deleted.',type:'success'});}catch(err){cov_1drmyaw665.s[229]++;console.log(err);cov_1drmyaw665.s[230]++;err=error_handler.error_message("Error deleting device",err);cov_1drmyaw665.s[231]++;error_handler.error_logger(req,err);cov_1drmyaw665.s[232]++;if(error_location==0){cov_1drmyaw665.b[24][0]++;cov_1drmyaw665.s[233]++;res.status(500).send({message:"Failed to delete device",type:'error'});}else{cov_1drmyaw665.b[24][1]++;cov_1drmyaw665.s[234]++;if(error_location==1){cov_1drmyaw665.b[25][0]++;cov_1drmyaw665.s[235]++;res.status(200).send({devices_lora:devices_lora,message:"Device deleted. Failed to fetch devices",type:'info'});}else{cov_1drmyaw665.b[25][1]++;cov_1drmyaw665.s[236]++;if(error_location==2){cov_1drmyaw665.b[26][0]++;cov_1drmyaw665.s[237]++;res.status(200).send({devices_lora:devices_lora,message:"Device deleted. Error deleting device in database",type:'info'});}else{cov_1drmyaw665.b[26][1]++;cov_1drmyaw665.s[238]++;if(error_location==3){cov_1drmyaw665.b[27][0]++;cov_1drmyaw665.s[239]++;res.status(200).send({devices_lora:devices_lora,message:"Device deleted. Error deleting device vessel relationship in database",type:'info'});}else{cov_1drmyaw665.b[27][1]++;cov_1drmyaw665.s[240]++;if(error_location==4){cov_1drmyaw665.b[28][0]++;cov_1drmyaw665.s[241]++;res.status(200).send({devices_lora:devices_lora,message:"Device deleted. Error parsing vessel ID to device data",type:'info'});}else{cov_1drmyaw665.b[28][1]++;cov_1drmyaw665.s[242]++;if(error_location==5){cov_1drmyaw665.b[29][0]++;cov_1drmyaw665.s[243]++;res.status(200).send({devices_lora:devices_lora,message:"Device deleted. Error parsing vessel ID to device data",type:'info'});}else{cov_1drmyaw665.b[29][1]++;cov_1drmyaw665.s[244]++;res.status(500).send({message:'Error',type:'error'});}}}}}}}},get_devices_activation:async function(req,res){cov_1drmyaw665.f[44]++;cov_1drmyaw665.s[245]++;try{cov_1drmyaw665.s[246]++;if(req.user.user_class=="IoT Network Admin"){cov_1drmyaw665.b[30][0]++;let device_activation=(cov_1drmyaw665.s[247]++,await get_device_activation(req.params.device_eui).catch(err=>{cov_1drmyaw665.f[45]++;cov_1drmyaw665.s[248]++;//Error getting device activation from lora app server
throw error.error_message("get device activation : lora app server",err.message);}));cov_1drmyaw665.s[249]++;res.status(200).send({device_activation:device_activation,message:'Device Activation fetched.',type:'success'});}else{cov_1drmyaw665.b[30][1]++;cov_1drmyaw665.s[250]++;res.status(403).send({error:"Forbidden"});}}catch(err){cov_1drmyaw665.s[251]++;err=error_handler.error_message("Error getting device activation",err);cov_1drmyaw665.s[252]++;error_handler.error_logger(req,err);cov_1drmyaw665.s[253]++;console.log(err);}},create_devices_activation:async function(req,res){cov_1drmyaw665.f[46]++;cov_1drmyaw665.s[254]++;try{cov_1drmyaw665.s[255]++;if(req.user.user_class=="IoT Network Admin"){cov_1drmyaw665.b[31][0]++;let data=(cov_1drmyaw665.s[256]++,req.body.device_activation);let request_data=(cov_1drmyaw665.s[257]++,device_api_request_data(data,3));cov_1drmyaw665.s[258]++;await lora_app_server.create_devices_activation(request_data,req.params.device_eui).catch(err=>{cov_1drmyaw665.f[47]++;cov_1drmyaw665.s[259]++;//Error creating device activation on lora app server
throw error_handler.error_message(err);});cov_1drmyaw665.s[260]++;res.status(200).send({message:'Device activated.',type:'success'});}else{cov_1drmyaw665.b[31][1]++;cov_1drmyaw665.s[261]++;res.status(403).send({error:"Forbidden"});}}catch(err){cov_1drmyaw665.s[262]++;err=error_handler.error_message("Error creating device activation",err);cov_1drmyaw665.s[263]++;error_handler.error_logger(req,err);cov_1drmyaw665.s[264]++;res.status(200).send({message:"Device activation failed.",type:'error'});}},delete_devices_activation:async function(req,res){cov_1drmyaw665.f[48]++;cov_1drmyaw665.s[265]++;try{cov_1drmyaw665.s[266]++;res.status(501).send({message:'Function not implemented.',type:'error'});}catch(err){}}};