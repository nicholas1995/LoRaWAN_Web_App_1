var cov_1l42fru15x=function(){var path="/Users/nicholasmitchell/LoRaWAN_Web_App_1/server/src/services/database/user_vessel_db.js",hash="101f9ee7c892e562fdf505081a5aa6f7059a83c2",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/nicholasmitchell/LoRaWAN_Web_App_1/server/src/services/database/user_vessel_db.js",statementMap:{"0":{start:{line:1,column:11},end:{line:1,column:30}},"1":{start:{line:3,column:0},end:{line:54,column:2}},"2":{start:{line:5,column:20},end:{line:5,column:22}},"3":{start:{line:6,column:16},end:{line:6,column:18}},"4":{start:{line:7,column:14},end:{line:9,column:100}},"5":{start:{line:10,column:4},end:{line:12,column:5}},"6":{start:{line:11,column:6},end:{line:11,column:37}},"7":{start:{line:13,column:4},end:{line:15,column:5}},"8":{start:{line:14,column:6},end:{line:14,column:47}},"9":{start:{line:16,column:4},end:{line:18,column:5}},"10":{start:{line:17,column:6},end:{line:17,column:51}},"11":{start:{line:19,column:4},end:{line:21,column:5}},"12":{start:{line:20,column:6},end:{line:20,column:47}},"13":{start:{line:22,column:4},end:{line:32,column:5}},"14":{start:{line:23,column:6},end:{line:30,column:7}},"15":{start:{line:24,column:8},end:{line:29,column:9}},"16":{start:{line:26,column:10},end:{line:26,column:49}},"17":{start:{line:28,column:10},end:{line:28,column:44}},"18":{start:{line:31,column:6},end:{line:31,column:37}},"19":{start:{line:33,column:4},end:{line:33,column:30}},"20":{start:{line:37,column:14},end:{line:39,column:52}},"21":{start:{line:40,column:4},end:{line:40,column:30}},"22":{start:{line:43,column:14},end:{line:45,column:46}},"23":{start:{line:46,column:4},end:{line:46,column:30}},"24":{start:{line:49,column:16},end:{line:51,column:68}},"25":{start:{line:52,column:6},end:{line:52,column:32}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:19},end:{line:4,column:20}},loc:{start:{line:4,column:60},end:{line:34,column:3}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:36,column:32},end:{line:36,column:33}},loc:{start:{line:36,column:50},end:{line:41,column:3}},line:36},"2":{name:"(anonymous_2)",decl:{start:{line:42,column:35},end:{line:42,column:36}},loc:{start:{line:42,column:64},end:{line:47,column:3}},line:42},"3":{name:"(anonymous_3)",decl:{start:{line:48,column:35},end:{line:48,column:36}},loc:{start:{line:48,column:64},end:{line:53,column:3}},line:48}},branchMap:{"0":{loc:{start:{line:10,column:4},end:{line:12,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:12,column:5}},{start:{line:10,column:4},end:{line:12,column:5}}],line:10},"1":{loc:{start:{line:10,column:8},end:{line:10,column:34}},type:"binary-expr",locations:[{start:{line:10,column:8},end:{line:10,column:18}},{start:{line:10,column:22},end:{line:10,column:34}}],line:10},"2":{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:13,column:4},end:{line:15,column:5}}],line:13},"3":{loc:{start:{line:13,column:8},end:{line:13,column:44}},type:"binary-expr",locations:[{start:{line:13,column:8},end:{line:13,column:23}},{start:{line:13,column:27},end:{line:13,column:44}}],line:13},"4":{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:16,column:4},end:{line:18,column:5}}],line:16},"5":{loc:{start:{line:16,column:8},end:{line:16,column:48}},type:"binary-expr",locations:[{start:{line:16,column:8},end:{line:16,column:25}},{start:{line:16,column:29},end:{line:16,column:48}}],line:16},"6":{loc:{start:{line:19,column:4},end:{line:21,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:21,column:5}},{start:{line:19,column:4},end:{line:21,column:5}}],line:19},"7":{loc:{start:{line:19,column:8},end:{line:19,column:44}},type:"binary-expr",locations:[{start:{line:19,column:8},end:{line:19,column:23}},{start:{line:19,column:27},end:{line:19,column:44}}],line:19},"8":{loc:{start:{line:22,column:4},end:{line:32,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:32,column:5}},{start:{line:22,column:4},end:{line:32,column:5}}],line:22},"9":{loc:{start:{line:24,column:8},end:{line:29,column:9}},type:"if",locations:[{start:{line:24,column:8},end:{line:29,column:9}},{start:{line:24,column:8},end:{line:29,column:9}}],line:24}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();const db=(cov_1l42fru15x.s[0]++,require("../../db"));cov_1l42fru15x.s[1]++;module.exports={get_user_vessel:function(id,user_id,vessel_id,deleted){cov_1l42fru15x.f[0]++;let sql_where=(cov_1l42fru15x.s[2]++,[]);let where=(cov_1l42fru15x.s[3]++,'');let sql=(cov_1l42fru15x.s[4]++,`SELECT user_vessel.*, DATE_FORMAT(user_vessel.date_created, GET_FORMAT(DATETIME, 'JIS')) AS date_created, 
    DATE_FORMAT(user_vessel.date_deleted, GET_FORMAT(DATETIME, 'JIS')) AS date_deleted, 
    vessel.vessel_name FROM user_vessel INNER JOIN vessel ON user_vessel.vessel_id=vessel.vessel_id`);cov_1l42fru15x.s[5]++;if((cov_1l42fru15x.b[1][0]++,id!=null)&&(cov_1l42fru15x.b[1][1]++,id!='null')){cov_1l42fru15x.b[0][0]++;cov_1l42fru15x.s[6]++;sql_where.push(`id = '${id}'`);}else{cov_1l42fru15x.b[0][1]++;}cov_1l42fru15x.s[7]++;if((cov_1l42fru15x.b[3][0]++,user_id!=null)&&(cov_1l42fru15x.b[3][1]++,user_id!="null")){cov_1l42fru15x.b[2][0]++;cov_1l42fru15x.s[8]++;sql_where.push(`user_id = '${user_id}'`);}else{cov_1l42fru15x.b[2][1]++;}cov_1l42fru15x.s[9]++;if((cov_1l42fru15x.b[5][0]++,vessel_id!=null)&&(cov_1l42fru15x.b[5][1]++,vessel_id!="null")){cov_1l42fru15x.b[4][0]++;cov_1l42fru15x.s[10]++;sql_where.push(`vessel_id = '${vessel_id}'`);}else{cov_1l42fru15x.b[4][1]++;}cov_1l42fru15x.s[11]++;if((cov_1l42fru15x.b[7][0]++,deleted!=null)&&(cov_1l42fru15x.b[7][1]++,deleted!="null")){cov_1l42fru15x.b[6][0]++;cov_1l42fru15x.s[12]++;sql_where.push(`deleted = '${deleted}'`);}else{cov_1l42fru15x.b[6][1]++;}cov_1l42fru15x.s[13]++;if(sql_where.length>0){cov_1l42fru15x.b[8][0]++;cov_1l42fru15x.s[14]++;for(let i=0;i<sql_where.length;i++){cov_1l42fru15x.s[15]++;if(i<sql_where.length-1){cov_1l42fru15x.b[9][0]++;cov_1l42fru15x.s[16]++;//will run every time but the last cause we do not want it ending with AND
where=where+`${sql_where[i]} AND `;}else{cov_1l42fru15x.b[9][1]++;cov_1l42fru15x.s[17]++;where=where+`${sql_where[i]}`;}}cov_1l42fru15x.s[18]++;sql=` ${sql} WHERE ${where}`;}else{cov_1l42fru15x.b[8][1]++;}cov_1l42fru15x.s[19]++;return db.queryAsync(sql);},//This returns all the not deleted vessel ids associated with a givien user id
get_user_vessels_not_deleted:function(user_id){cov_1l42fru15x.f[1]++;let sql=(cov_1l42fru15x.s[20]++,`SELECT *
        FROM user_vessel
        WHERE user_id ='${user_id}' AND deleted='0'`);cov_1l42fru15x.s[21]++;return db.queryAsync(sql);},create_user_vessel_relationship:function(user_id,vessel_id){cov_1l42fru15x.f[2]++;let sql=(cov_1l42fru15x.s[22]++,`INSERT INTO user_vessel
        (user_id, vessel_id)
        VALUES ('${user_id}', '${vessel_id}')`);cov_1l42fru15x.s[23]++;return db.queryAsync(sql);},delete_user_vessel_relationship:function(user_id,vessel_id){cov_1l42fru15x.f[3]++;let sql=(cov_1l42fru15x.s[24]++,`UPDATE user_vessel
        SET deleted = '1'
        WHERE user_id = '${user_id}' AND vessel_id = '${vessel_id}'`);cov_1l42fru15x.s[25]++;return db.queryAsync(sql);}};